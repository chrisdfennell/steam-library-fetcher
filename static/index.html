<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam Library Fetcher</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <h1>Steam Library Fetcher</h1>
        <p class="info">Donâ€™t know your Steam username? <a href="https://steamcommunity.com/my/profile" target="_blank">Click here to visit your Steam profile</a>. Look for a URL like <code>steamcommunity.com/id/yourusername</code>. If you donâ€™t have a custom URL, copy the 17-digit SteamID64 from a URL like <code>steamcommunity.com/profiles/7656119...</code>.</p>
        <a href="readme.html" class="readme-link" target="_blank">View Project README</a>

        <form id="steamForm">
            <label for="userInput">Your Steam Username or SteamID64:</label>
            <input type="text" id="userInput" name="userInput" placeholder="e.g., gabelogannewell or 76561197960434622">
            <label for="friendInput">Friend's Steam Username or SteamID64:</label>
            <input type="text" id="friendInput" name="friendInput" placeholder="e.g., friendusername or 7656119...">
            <button type="submit">Get Libraries</button>
        </form>

        <h2>Your Steam ID: <span id="steamId"></span> <button id="copyButton" style="display:none;">Copy SteamID</button></h2>

        <div class="section" id="statsSection">
            <h3>Library Statistics <button class="toggle-section">Toggle</button></h3>
            <ul id="statsList"></ul>
        </div>

        <div class="section" id="trendsSection">
            <h3>Playtime Trends <button class="toggle-section">Toggle</button></h3>
            <canvas id="playtimeChart" width="400" height="200"></canvas>
        </div>

        <div class="section" id="topGamesSection">
            <h3>Top 20 Games by Playtime <button class="toggle-section">Toggle</button></h3>
            <ul id="topGamesList"></ul>
        </div>

        <div class="section" id="recentGamesSection">
            <h3>Recently Played Games <button class="toggle-section">Toggle</button></h3>
            <ul id="recentGamesList"></ul>
        </div>

        <div class="section" id="compareSection">
            <h3>Library Comparison <button class="toggle-section">Toggle</button></h3>
            <ul id="compareList"></ul>
        </div>

        <div class="section" id="fullListSection">
            <h3>Full List</h3>
            <div class="filter">
                <label><input type="checkbox" id="showPlayedOnly"> Show only games with playtime > 0</label>
                <label><input type="checkbox" id="filterWindows"> Windows</label>
                <label><input type="checkbox" id="filterMac"> Mac</label>
                <label><input type="checkbox" id="filterLinux"> Linux</label>
                <label><input type="checkbox" id="filterDeck"> Steam Deck</label>
                <label><input type="checkbox" id="showFullLibrary"> Show Full Library (No Pagination)</label>
                <input type="text" id="searchInput" placeholder="Search games by name...">
                <label>Sort by:
                    <select id="sortBy">
                        <option value="name">Name (A-Z)</option>
                        <option value="playtime">Total Playtime (High to Low)</option>
                        <option value="lastPlayed">Last Played (Recent to Oldest)</option>
                        <option value="playtime2Weeks">Playtime in Last 2 Weeks (High to Low)</option>
                    </select>
                </label>
                <label>Played in:
                    <select id="dateRange">
                        <option value="all">All Time</option>
                        <option value="last30Days">Last 30 Days</option>
                        <option value="lastYear">Last Year</option>
                    </select>
                </label>
                <button id="exportCsv">Export to CSV</button>
                <button id="shareLink">Copy Shareable Link</button>
            </div>
            <ul id="gameList"></ul>
            <div class="pagination">
                <button id="prevPage" disabled>Previous</button>
                <span id="pageInfo"></span>
                <button id="nextPage">Next</button>
            </div>
        </div>

        <p id="errorMessage" class="error"></p>
    </div>

    <button id="darkModeToggle" title="Toggle Dark/Light Mode">ðŸŒ™</button>

    <script src="/script.js"></script>
</body>
</html>